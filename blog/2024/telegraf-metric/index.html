<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Establishing a telegraf metric system | Yutong Li </title> <meta name="author" content="Yutong Li"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/icon.jpg?add5bae318dd98cb47b9a9bd3554345d"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://alshedivat.github.io/blog/2024/telegraf-metric/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Yutong</span> Li </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Establishing a telegraf metric system</h1> <p class="post-meta"> Created in September 28, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/telemetry"> <i class="fa-solid fa-hashtag fa-sm"></i> telemetry</a>   <a href="/blog/tag/maintenance"> <i class="fa-solid fa-hashtag fa-sm"></i> maintenance</a>   <a href="/blog/tag/it"> <i class="fa-solid fa-hashtag fa-sm"></i> IT</a>   ·   <a href="/blog/category/it"> <i class="fa-solid fa-tag fa-sm"></i> IT</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Telegraf is an agent for collecting, processing, aggregating, and writing metrics. With over 200 plugins, it provides all the metrics you need to track and understand your systems and applications effectively. This blog will demonstrate how to set up a telegraf metric stack.</p> <p>To persist the data, we will store the telemetry data using <strong>InfluxDB.</strong> This efficient time-series database is well suited to store the data for subsequent analysis (e.g. visualization via Grafana).</p> <h2 id="deploy-a-influxdb-service">Deploy A InfluxDB Service</h2> <p>There are two ways to deploy an InfluxDB database:</p> <ol> <li>Docker Compose</li> <li>Kubernetes</li> </ol> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">influxdb</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">influxdb:2.2</span> <span class="c1"># image name</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">influxdb</span> <span class="c1"># container name</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8086:8086"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">influxdb_conf:/etc/influxdb</span> <span class="c1"># conf volume</span>
      <span class="pi">-</span> <span class="s">influxdb_data:/var/lib/influxdb</span> <span class="c1"># data volume</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">influxdb_data</span><span class="pi">:</span>
  <span class="na">influxdb_conf</span><span class="pi">:</span>
</code></pre></div></div> <p>Below is the reference configuration file for deployment using K8S. Please note that NFS data volumes are used here and the service is exposed through Nginx Ingress, so the actual deployment needs to be modified according to the specific cluster configuration (the places that need to be modified have been labeled). Deployment type resources are used here, actually using StatefulSet would be better.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">workload.user.cattle.io/workloadselector</span><span class="pi">:</span> <span class="s">apps.deployment-&lt;namespace&gt;-influxdb</span> <span class="c1"># TO BE MODIFED</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">influxdb</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">&lt;namespace&gt;</span> <span class="c1"># TO BE MODIFED</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">workload.user.cattle.io/workloadselector</span><span class="pi">:</span> <span class="s">apps.deployment-&lt;namespace&gt;-influxdb</span> <span class="c1"># TO BE MODIFED</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="kc">null</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">workload.user.cattle.io/workloadselector</span><span class="pi">:</span> <span class="s">apps.deployment-&lt;namespace&gt;-influxdb</span> <span class="c1"># TO BE MODIFED</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">influxdb:2.2</span>
          <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">container-0</span>
          <span class="na">ports</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">8086</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">8086tcp</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
          <span class="na">resources</span><span class="pi">:</span>
            <span class="na">limits</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">4Gi</span>
            <span class="na">requests</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">50m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>
          <span class="na">volumeMounts</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/var/lib/influxdb2</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;volume_name&gt;</span> <span class="c1"># TO BE MODIFED</span>
              <span class="na">subPath</span><span class="pi">:</span> <span class="s">db-data</span>
            <span class="pi">-</span> <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/etc/influxdb</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;volume_name&gt;</span> <span class="c1"># TO BE MODIFED</span>
              <span class="na">subPath</span><span class="pi">:</span> <span class="s">db-config</span>
      <span class="na">restartPolicy</span><span class="pi">:</span> <span class="s">Always</span>
      <span class="na">volumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;volume_name&gt;</span> <span class="c1"># TO BE MODIFED</span>
          <span class="na">nfs</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s">/&lt;volume_path&gt;</span> <span class="c1"># TO BE MODIFED</span>
            <span class="na">server</span><span class="pi">:</span> <span class="s">0.0.0.0</span> <span class="c1"># TO BE MODIFED</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">influxdb</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">&lt;namespace&gt;</span> <span class="c1"># TO BE MODIFED</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">8086tcp</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">8086</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">8086</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">workload.user.cattle.io/workloadselector</span><span class="pi">:</span> <span class="s">apps.deployment-&lt;namespace&gt;-influxdb</span> <span class="c1"># TO BE MODIFED</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">ClusterIP</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">nginx</span> <span class="c1"># TO BE MODIFED</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">influxdb-ingress</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">&lt;namespace&gt;</span> <span class="c1"># TO BE MODIFED</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">influxdb.example.com</span> <span class="c1"># TO BE MODIFED</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">influxdb</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">number</span><span class="pi">:</span> <span class="m">8086</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">influxdb.example.top</span> <span class="c1"># TO BE MODIFED</span>
      <span class="na">secretName</span><span class="pi">:</span> <span class="s">&lt;tls_secret&gt;</span> <span class="c1"># TO BE MODIFED</span>
</code></pre></div></div> <h2 id="deploy-a-telegraf-collector">Deploy A Telegraf Collector</h2> <p>These are steps to deploy telegraf collector</p> <ol> <li>Install telegraf package according to this <a href="https://github.com/influxdata/telegraf/blob/master/docs/INSTALL_GUIDE.md" rel="external nofollow noopener" target="_blank">guide</a>.</li> <li>Generate access token from influxdb’s webui.</li> <li>Configure telegraf’s configuration <code class="language-plaintext highlighter-rouge">/etc/telegraf.conf</code> according to the access token.</li> <li>Test the configuration.</li> </ol> <p>You can use this command to generate the default configuration as a reference:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>telegraf config <span class="o">&gt;</span> telegraf.conf
</code></pre></div></div> <p>Here is a selection of useful telegraf configurations:</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[<span class="n">global_tags</span>]
[<span class="n">agent</span>]
  <span class="n">interval</span> = <span class="s2">"60s"</span>
  <span class="n">round_interval</span> = <span class="n">true</span>
  <span class="n">metric_batch_size</span> = <span class="m">1000</span>
  <span class="n">metric_buffer_limit</span> = <span class="m">10000</span>
  <span class="n">collection_jitter</span> = <span class="s2">"0s"</span>
  <span class="n">flush_interval</span> = <span class="s2">"10s"</span>
  <span class="n">flush_jitter</span> = <span class="s2">"0s"</span>
  <span class="n">precision</span> = <span class="s2">"0s"</span>
  <span class="n">hostname</span> = <span class="s2">""</span>
  <span class="n">omit_hostname</span> = <span class="n">false</span>
[[<span class="n">outputs</span>.<span class="n">influxdb_v2</span>]]
    <span class="n">urls</span> = [<span class="s2">"https://influxdb.example.com"</span>]
    <span class="n">token</span> = <span class="s2">"xxx"</span>
    <span class="n">organization</span> = <span class="s2">"&lt;organization_name&gt;"</span>
    <span class="n">bucket</span> = <span class="s2">"telegraf"</span>
[[<span class="n">inputs</span>.<span class="n">cpu</span>]]
  <span class="n">percpu</span> = <span class="n">true</span>
  <span class="n">totalcpu</span> = <span class="n">true</span>
  <span class="n">collect_cpu_time</span> = <span class="n">false</span>
  <span class="n">report_active</span> = <span class="n">false</span>
[[<span class="n">inputs</span>.<span class="n">disk</span>]]
  <span class="n">ignore_fs</span> = [<span class="s2">"tmpfs"</span>, <span class="s2">"devtmpfs"</span>, <span class="s2">"devfs"</span>, <span class="s2">"iso9660"</span>, <span class="s2">"overlay"</span>, <span class="s2">"aufs"</span>, <span class="s2">"squashfs"</span>, <span class="s2">"loop"</span>]
[[<span class="n">inputs</span>.<span class="n">diskio</span>]]
[[<span class="n">inputs</span>.<span class="n">kernel</span>]]
[[<span class="n">inputs</span>.<span class="n">mem</span>]]
[[<span class="n">inputs</span>.<span class="n">processes</span>]]
[[<span class="n">inputs</span>.<span class="n">swap</span>]]
[[<span class="n">inputs</span>.<span class="n">system</span>]]
[[<span class="n">inputs</span>.<span class="n">bond</span>]]
[[<span class="n">inputs</span>.<span class="n">net</span>]]
[[<span class="n">inputs</span>.<span class="n">nvidia_smi</span>]]
    <span class="n">timeout</span> = <span class="s2">"25s"</span>
[[<span class="n">inputs</span>.<span class="n">smart</span>]]
    <span class="n">interval</span> = <span class="s2">"600s"</span>
    <span class="n">attributes</span> = <span class="n">true</span>
[[<span class="n">inputs</span>.<span class="n">temp</span>]]
</code></pre></div></div> <h3 id="agent">[agent]</h3> <p>This configures how agent behaves, <code class="language-plaintext highlighter-rouge">hostname</code> defaults to system’s hostname.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[<span class="n">agent</span>]
  <span class="n">interval</span> = <span class="s2">"60s"</span>
  <span class="n">round_interval</span> = <span class="n">true</span>
  <span class="n">metric_batch_size</span> = <span class="m">1000</span>
  <span class="n">metric_buffer_limit</span> = <span class="m">10000</span>
  <span class="n">collection_jitter</span> = <span class="s2">"0s"</span>
  <span class="n">flush_interval</span> = <span class="s2">"10s"</span>
  <span class="n">flush_jitter</span> = <span class="s2">"0s"</span>
  <span class="n">precision</span> = <span class="s2">"0s"</span>
  <span class="n">hostname</span> = <span class="s2">""</span>
  <span class="n">omit_hostname</span> = <span class="n">false</span>
</code></pre></div></div> <h3 id="outputsinfluxdb_vs">[outputs.influxdb_vs]</h3> <p>This section instructs telegraf to send metric to InfluxDB database, <code class="language-plaintext highlighter-rouge">url</code>, <code class="language-plaintext highlighter-rouge">token</code>, <code class="language-plaintext highlighter-rouge">organization</code> and <code class="language-plaintext highlighter-rouge">bucket</code> need to be properly set.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">outputs</span>.<span class="n">influxdb_v2</span>]]
    <span class="n">urls</span> = [<span class="s2">"https://influxdb.example.com"</span>]
    <span class="n">token</span> = <span class="s2">"xxx"</span>
    <span class="n">organization</span> = <span class="s2">"&lt;organization_name&gt;"</span>
    <span class="n">bucket</span> = <span class="s2">"telegraf"</span>
</code></pre></div></div> <h3 id="inputscpu">[[inputs.cpu]]</h3> <p>This enables the collection of CPU usage.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">cpu</span>]]
  <span class="n">percpu</span> = <span class="n">true</span>
  <span class="n">totalcpu</span> = <span class="n">true</span>
  <span class="n">collect_cpu_time</span> = <span class="n">false</span>
  <span class="n">report_active</span> = <span class="n">false</span>
</code></pre></div></div> <h3 id="inputsdisk">[[inputs.disk]]</h3> <p>This enables the collection of disk and filesystem, except some types.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">disk</span>]]
  <span class="n">ignore_fs</span> = [<span class="s2">"tmpfs"</span>, <span class="s2">"devtmpfs"</span>, <span class="s2">"devfs"</span>, <span class="s2">"iso9660"</span>, <span class="s2">"overlay"</span>, <span class="s2">"aufs"</span>, <span class="s2">"squashfs"</span>, <span class="s2">"loop"</span>]
</code></pre></div></div> <h3 id="inputsdiskio">[[inputs.diskio]]</h3> <p>This enables the collection of disk io.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">diskio</span>]]
</code></pre></div></div> <h3 id="inputskernel">[[inputs.kernel]]</h3> <p>This enables the collection of kernel info.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">kernel</span>]]
</code></pre></div></div> <h3 id="inputsmem">[[inputs.mem]]</h3> <p>This enables the collection of memory usage.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">mem</span>]]
</code></pre></div></div> <h3 id="inputsprocesses">[[inputs.processes]]</h3> <p>This enables the collection of processes.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">processes</span>]]
</code></pre></div></div> <h3 id="inputsswap">[[inputs.swap]]</h3> <p>This enables the collection of swap usage.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">swap</span>]]
</code></pre></div></div> <h3 id="inputssystem">[[inputs.system]]</h3> <p>This enables the collection of system.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">system</span>]]
</code></pre></div></div> <h3 id="inputsbond">[[inputs.bond]]</h3> <p>This enables the collection of traffic.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">bond</span>]]
</code></pre></div></div> <h3 id="inputsnet">[[inputs.net]]</h3> <p>This enables the collection of network.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">net</span>]]
</code></pre></div></div> <h3 id="inputsnvidia_smi">[[inputs.nvidia_smi]]</h3> <p>This enables the collection of NVIDIA GPUs.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">nvidia_smi</span>]]
    <span class="n">timeout</span> = <span class="s2">"25s"</span>
</code></pre></div></div> <h3 id="inputssmart">[[inputs.smart]]</h3> <p>This enables the collection of SMART information.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">smart</span>]]
    <span class="n">interval</span> = <span class="s2">"600s"</span>
    <span class="n">attributes</span> = <span class="n">true</span>
</code></pre></div></div> <h3 id="inputstemp">[[inputs.temp]]</h3> <p>This enables the collection of thermo.</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[<span class="n">inputs</span>.<span class="n">temp</span>]]
</code></pre></div></div> <p>After you have generated the configuration, run <code class="language-plaintext highlighter-rouge">telegraf</code> command to test it. If everything works fine, enable the telegraf system service and let it run in the background.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/nextcloud/">Nextcloud</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/unifi-get-started/">Unifi AP Get Started Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/docker-macvlan/">Docker MacVLAN Configuration Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/dnf-crb/">Unifi AP Get Started Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/manus-cheatsheet/">Cheatsheet to run MANUS</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Yutong Li. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let theme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===theme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-publications",title:"publications",description:"",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of my cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"post-nextcloud",title:"Nextcloud",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/nextcloud/"}},{id:"post-unifi-ap-get-started-guide",title:"Unifi AP Get Started Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/unifi-get-started/"}},{id:"post-docker-macvlan-configuration-guide",title:"Docker MacVLAN Configuration Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/docker-macvlan/"}},{id:"post-unifi-ap-get-started-guide",title:"Unifi AP Get Started Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/dnf-crb/"}},{id:"post-cheatsheet-to-run-manus",title:"Cheatsheet to run MANUS",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/manus-cheatsheet/"}},{id:"post-establishing-a-telegraf-metric-system",title:"Establishing a telegraf metric system",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/telegraf-metric/"}},{id:"post-the-right-way-to-manage-cuda-environment-with-conda",title:"The right way to manage CUDA environment with conda.",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/conda-nvidia-cuda/"}},{id:"post-deploying-an-experimental-minio-single-node-cluster-with-directpv",title:"Deploying an experimental MinIO single-node cluster with DirectPV",description:"for experiment purpose, only",section:"Posts",handler:()=>{window.location.href="/blog/2024/minio-kubernetes/"}},{id:"post-kubernetes-ingress-annotations-for-harbor",title:"Kubernetes Ingress annotations for Harbor",description:"solution for push timeout with large images",section:"Posts",handler:()=>{window.location.href="/blog/2024/k8s-ingress-annotations/"}},{id:"post-solution-to-the-physical-disk-39-s-sector-size-is-not-supported-by-the-storage-pool-0x80e70004",title:"Solution to The physical disk&#39;s sector size is not supported by the storage pool (0x80E70004)",description:"Erase and Reboot is all you need.",section:"Posts",handler:()=>{window.location.href="/blog/2024/windows-storage-space/"}},{id:"post-cka-exam-cheatsheet",title:"CKA exam cheatsheet",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/cka-exam-explained/"}},{id:"news-1-paper-is-accepted-by-nature-communications",title:"1 paper is accepted by **Nature Communications**.",description:"",section:"News"},{id:"news-graduated-from-shanghai-jiao-tong-university",title:"Graduated from Shanghai Jiao Tong University.",description:"",section:"News"},{id:"news-joined-sjtu-machine-vision-and-intelligence-group-mvig-and-robotflow",title:"Joined SJTU Machine Vision and Intelligence Group (MVIG) and RobotFlow",description:"",section:"News"},{id:"projects-unifolding",title:"UniFolding",description:"",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-markit",title:"MarkIt",description:"",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-idekube",title:"IDEKube",description:"",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%64%61%76%69%64%6C%69%79%75%74%6F%6E%67@%73%6A%74%75.%65%64%75.%63%6E","_blank")}},{id:"socials-orcid",title:"ORCID",section:"Socials",handler:()=>{window.open("https://orcid.org/0009-0002-6959-6159","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=KSv942gAAAAJ","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/davidliyutong","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>